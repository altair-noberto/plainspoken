---
import BaseLayout from './BaseLayout.astro'
import BlogSidebar from '../components/BlogSidebar.astro'

const {entry} = Astro.props
const {frontmatter} = Astro.props
const {headings} = Astro.props
const englishVer = entry.id.slice(6).split('.')[0]

const title = `Blog | ${frontmatter.title}`
function toDateString(Date: Date){
    const months = ["01", "02", "03", "04", "05", "06", 
    "07", "08", "09", "10", "11", "12"]

    const day = Date.getDate();
    const mouth = months[Date.getMonth()];
    const year = Date.getFullYear();

    return `${day}/${mouth}/${year}`;
  }
---

<BaseLayout pageTitle={title}>
    <div class="mainPostDiv">
        <BlogSidebar headings={headings} />
    <div class="postDiv">
        <h1>{frontmatter.title}</h1>
        <p>Published on: {toDateString(frontmatter.pubDate)}</p>
        <p>Written by: {frontmatter.author}</p>
        <p style="display: flex; gap: 10px; flex-wrap: Wrap;"><strong>Tags: </strong>{frontmatter.tags.map((tag) => <a href={"/tags/" + tag}>{tag}</a>)}</p>
        {frontmatter.portuguese !== '' ? <a href={frontmatter.portuguese}>Versão em português</a> : <a href={'/blog/posts/' + englishVer}>English version</a>}
        {frontmatter.image.url ? <p style="text-align: center;"><img style="max-width: 100%;" src={frontmatter.image.url}/></p> : <span></span>}
        <p style="border-bottom: 1px solid var(--main); padding-bottom: 0.5em;">{frontmatter.description}</p>
        <slot />
    </div>
    </div>
    <style>
        h1{
            border-left: 6px solid var(--highlight);
            padding-left: 0.3em;
            border-bottom: none;
        }
        .mainPostDiv{
            display: flex;
        }
        @media screen and (max-width: 625px){
            .mainPostDiv{
                flex-direction: column;
            }
        }
    </style>
</BaseLayout>